# K003 Top-50 Queries by total_time

## Observations ##
Data collected: 2019-06-24 22:21:47 +0000 UTC  
Current database: dbname  



### Replica servers: ###

#### Replica (`runner-fa6cab46-project-9951336-concurrent-0`) ####

Start: 2019-06-24T22:21:32.821437+00:00  
End: 2019-06-24T22:21:47.942234+00:00  
Period seconds: 15.12079  
Period age: 00:00:15.120797  

  

| \# | Query | Calls | &#9660;&nbsp;Total&nbsp;time | Rows | shared_blks_hit | shared_blks_read | shared_blks_dirtied | shared_blks_written | blk_read_time | blk_write_time | kcache_reads | kcache_writes | kcache_user_time_ms | kcache_system_time |
|----|----------|-------|------------|------|-----------------|------------------|---------------------|---------------------|---------------|----------------|--------------|---------------|---------------------|--------------------|
|1 |create&nbsp;database&nbsp;dbname<br/>[Full query](../../json_reports/1_2019_06_24T22_20_43_+0000/K_query_groups/1_1.sql) |0<br/>0.00/sec<br/>0.00/call<br/>0.00% |68.27&nbsp;ms<br/>4.515&nbsp;ms/sec<br/>0.000&nbsp;ms/call<br/>100.00% |0<br/>0.00/sec<br/>0.00/call<br/>0.00% |-3&nbsp;blks<br/>-0.20&nbsp;blks/sec<br/>0.00&nbsp;blks/call<br/>100.00% |3&nbsp;blks<br/>0.20&nbsp;blks/sec<br/>0.00&nbsp;blks/call<br/>100.00% |0&nbsp;blks<br/>0.00&nbsp;blks/sec<br/>0.00&nbsp;blks/call<br/>0.00% |0&nbsp;blks<br/>0.00&nbsp;blks/sec<br/>0.00&nbsp;blks/call<br/>0.00% |0.00&nbsp;ms<br/>0.000&nbsp;ms/sec<br/>0.000&nbsp;ms/call<br/>0.00% |0.00&nbsp;ms<br/>0.000&nbsp;ms/sec<br/>0.000&nbsp;ms/call<br/>0.00% |0.00&nbsp;bytes<br/>0.00&nbsp;bytes/sec<br/>0.00&nbsp;bytes/call<br/>0.00% |0.00&nbsp;bytes<br/>0.00&nbsp;bytes/sec<br/>0.00&nbsp;bytes/call<br/>0.00% |0.00&nbsp;ms<br/>0.000&nbsp;ms/sec<br/>0.000&nbsp;ms/call<br/>0.00% |0.00&nbsp;ms<br/>0.000&nbsp;ms/sec<br/>0.000&nbsp;ms/call<br/>0.00% |


## Conclusions ##
  - [P1] For some query groups, total_time > 30% of overall timing. It was observed on the following node: `runner-fa6cab46-project-9951336-concurrent-0`. Such a high percentage means that those queries are "major contributors" to resource consumption on those nodes. In other words, if a query group has `total_time` which is 30% of overall timing, it means that during the observation period, 30% of time CPUs were working on that node processing queries from this group.  

  
 


## Recommendations ##
  - [P1] For some query groups, total_time > 30% of overall timing. To reduce `total_time` for particular query group consider the following tactics:  
    - perform query micro-optimization (take particular query examples related to the group, use `EXPLAIN` and `EXPLAIN (BUFFERS, ANALYZE)` to optimize it, also consider using [Joe bot](https://gitlab.com/postgres-ai/joe) and special DB instances) simplifying the process of for query optimization, 
    - if the frequency of execution is high (check the `calls / second` metric), consider reducing this frequency, changing the application code and/or, if it is applicable, applying query results caching.  

  
 

