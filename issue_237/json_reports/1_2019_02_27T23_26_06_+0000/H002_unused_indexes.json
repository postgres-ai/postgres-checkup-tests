{
  "project": "test",
  "name": "unused_indexes",
  "checkId": "H002",
  "timestamptz": "2019-02-27 23:26:57.0+0000",
  "dependencies": {
    "null": "null"
  },
  "last_nodes_json": {
    "hosts": {
      "runner-ed2dce3a-project-9951336-concurrent-0": {
        "internal_alias": "node1",
        "index": "1",
        "role": "master",
        "role_change_detected_at": "never"
      }
    },
    "last_check": {
      "epoch": "1",
      "timestamptz": "2019-02-27 23:26:57.0+0000",
      "dir": "1_2019_02_27T23_26_06_+0000"
    }
  },
  "database": "dbname",
  "results": {
    "runner-ed2dce3a-project-9951336-concurrent-0": {
      "data": {
        "never_used_indexes": {
          "public.r_red_fk_1_x_idx": {
            "num": 1,
            "reason": "Never Used Indexes",
            "index_id": "16454",
            "schema_name": "public",
            "table_name": "t_red_fk_1",
            "index_name": "r_red_fk_1_x_idx",
            "idx_scan": 0,
            "all_scans": 8,
            "index_scan_pct": 0,
            "writes": 1000001,
            "scans_per_write": 0,
            "index_size_bytes": 22487040,
            "table_size_bytes": 36249600,
            "idx_is_btree": true,
            "index_def": "CREATE INDEX r_red_fk_1_x_idx ON public.t_red_fk_1 USING btree (id)",
            "formated_index_name": "r_red_fk_1_x_idx",
            "formated_schema_name": "public",
            "formated_table_name": "t_red_fk_1",
            "formated_relation_name": "t_red_fk_1",
            "opclasses": "3124",
            "supports_fk": true
          },
          "public.i_redundant_1": {
            "num": 2,
            "reason": "Never Used Indexes",
            "index_id": "16421",
            "schema_name": "public",
            "table_name": "t_with_redundant_index",
            "index_name": "i_redundant_1",
            "idx_scan": 0,
            "all_scans": 6,
            "index_scan_pct": 0,
            "writes": 1000000,
            "scans_per_write": 0,
            "index_size_bytes": 22487040,
            "table_size_bytes": 36249600,
            "idx_is_btree": true,
            "index_def": "CREATE INDEX i_redundant_1 ON public.t_with_redundant_index USING btree (i)",
            "formated_index_name": "i_redundant_1",
            "formated_schema_name": "public",
            "formated_table_name": "t_with_redundant_index",
            "formated_relation_name": "t_with_redundant_index",
            "opclasses": "1978",
            "supports_fk": false
          },
          "public.r_red_fk_2_fk_idx": {
            "num": 3,
            "reason": "Never Used Indexes",
            "index_id": "16463",
            "schema_name": "public",
            "table_name": "t_red_fk_2",
            "index_name": "r_red_fk_2_fk_idx",
            "idx_scan": 0,
            "all_scans": 3,
            "index_scan_pct": 0,
            "writes": 1000000,
            "scans_per_write": 0,
            "index_size_bytes": 22487040,
            "table_size_bytes": 44285952,
            "idx_is_btree": true,
            "index_def": "CREATE INDEX r_red_fk_2_fk_idx ON public.t_red_fk_2 USING btree (r_t1_id)",
            "formated_index_name": "r_red_fk_2_fk_idx",
            "formated_schema_name": "public",
            "formated_table_name": "t_red_fk_2",
            "formated_relation_name": "t_red_fk_2",
            "opclasses": "3124",
            "supports_fk": false
          },
          "public.i_redundant_2": {
            "num": 4,
            "reason": "Never Used Indexes",
            "index_id": "16422",
            "schema_name": "public",
            "table_name": "t_with_redundant_index",
            "index_name": "i_redundant_2",
            "idx_scan": 0,
            "all_scans": 6,
            "index_scan_pct": 0,
            "writes": 1000000,
            "scans_per_write": 0,
            "index_size_bytes": 22487040,
            "table_size_bytes": 36249600,
            "idx_is_btree": true,
            "index_def": "CREATE INDEX i_redundant_2 ON public.t_with_redundant_index USING btree (i)",
            "formated_index_name": "i_redundant_2",
            "formated_schema_name": "public",
            "formated_table_name": "t_with_redundant_index",
            "formated_relation_name": "t_with_redundant_index",
            "opclasses": "1978",
            "supports_fk": false
          },
          "public.r_red_fk_1_id_idx": {
            "num": 5,
            "reason": "Never Used Indexes",
            "index_id": "16453",
            "schema_name": "public",
            "table_name": "t_red_fk_1",
            "index_name": "r_red_fk_1_id_idx",
            "idx_scan": 0,
            "all_scans": 8,
            "index_scan_pct": 0,
            "writes": 1000001,
            "scans_per_write": 0,
            "index_size_bytes": 22487040,
            "table_size_bytes": 36249600,
            "idx_is_btree": true,
            "index_def": "CREATE INDEX r_red_fk_1_id_idx ON public.t_red_fk_1 USING btree (id)",
            "formated_index_name": "r_red_fk_1_id_idx",
            "formated_schema_name": "public",
            "formated_table_name": "t_red_fk_1",
            "formated_relation_name": "t_red_fk_1",
            "opclasses": "3124",
            "supports_fk": true
          },
          "public.i_unused": {
            "num": 6,
            "reason": "Never Used Indexes",
            "index_id": "16417",
            "schema_name": "public",
            "table_name": "t_with_unused_index",
            "index_name": "i_unused",
            "idx_scan": 0,
            "all_scans": 3,
            "index_scan_pct": 0,
            "writes": 1000000,
            "scans_per_write": 0,
            "index_size_bytes": 22487040,
            "table_size_bytes": 36249600,
            "idx_is_btree": true,
            "index_def": "CREATE INDEX i_unused ON public.t_with_unused_index USING btree (i)",
            "formated_index_name": "i_unused",
            "formated_schema_name": "public",
            "formated_table_name": "t_with_unused_index",
            "formated_relation_name": "t_with_unused_index",
            "opclasses": "1978",
            "supports_fk": false
          },
          "public.i_bloated": {
            "num": 7,
            "reason": "Never Used Indexes",
            "index_id": "16444",
            "schema_name": "public",
            "table_name": "bloated",
            "index_name": "i_bloated",
            "idx_scan": 0,
            "all_scans": 2,
            "index_scan_pct": 0,
            "writes": 150000,
            "scans_per_write": 0,
            "index_size_bytes": 2260992,
            "table_size_bytes": 3629056,
            "idx_is_btree": true,
            "index_def": "CREATE INDEX i_bloated ON public.bloated USING btree (i)",
            "formated_index_name": "i_bloated",
            "formated_schema_name": "public",
            "formated_table_name": "bloated",
            "formated_relation_name": "bloated",
            "opclasses": "1978",
            "supports_fk": false
          }
        },
        "never_used_indexes_total": {
          "index_size_bytes_sum": 137183232,
          "table_size_bytes_sum": 229163008
        },
        "rarely_used_indexes": {
          "public.t_rar_q_idx": {
            "num": 1,
            "reason": "Low Scans, High Writes",
            "index_id": "16410",
            "schema_name": "public",
            "table_name": "t_rar_q",
            "index_name": "t_rar_q_idx",
            "idx_scan": 1,
            "all_scans": 12,
            "index_scan_pct": 8.33,
            "writes": 1744542,
            "scans_per_write": 0,
            "index_size_bytes": 44941312,
            "table_size_bytes": 52305920,
            "idx_is_btree": true,
            "index_def": "CREATE INDEX t_rar_q_idx ON public.t_rar_q USING btree (id)",
            "formated_index_name": "t_rar_q_idx",
            "formated_schema_name": "public",
            "formated_table_name": "t_rar_q",
            "formated_relation_name": "t_rar_q",
            "opclasses": "1978",
            "supports_fk": false,
            "grp": 1
          }
        },
        "rarely_used_indexes_total": {
          "index_size_bytes_sum": 44941312,
          "table_size_bytes_sum": 52305920
        },
        "redundant_indexes": {
          "public.i_redundant_1": {
            "num": 1,
            "index_id": "16421",
            "schema_name": "public",
            "table_name": "t_with_redundant_index",
            "table_size_bytes": 36249600,
            "index_name": "i_redundant_1",
            "access_method": "btree",
            "reason": "i_redundant_2",
            "main_index_def": "CREATE INDEX i_redundant_2 ON public.t_with_redundant_index USING btree (i)",
            "main_index_size": "21 MB",
            "index_def": "CREATE INDEX i_redundant_1 ON public.t_with_redundant_index USING btree (i)",
            "index_size_bytes": 22487040,
            "index_usage": 0,
            "formated_index_name": "i_redundant_1",
            "formated_schema_name": "public",
            "formated_table_name": "t_with_redundant_index",
            "formated_relation_name": "t_with_redundant_index",
            "supports_fk": false
          },
          "public.i_redundant_2": {
            "num": 2,
            "index_id": "16422",
            "schema_name": "public",
            "table_name": "t_with_redundant_index",
            "table_size_bytes": 36249600,
            "index_name": "i_redundant_2",
            "access_method": "btree",
            "reason": "i_redundant_1",
            "main_index_def": "CREATE INDEX i_redundant_1 ON public.t_with_redundant_index USING btree (i)",
            "main_index_size": "21 MB",
            "index_def": "CREATE INDEX i_redundant_2 ON public.t_with_redundant_index USING btree (i)",
            "index_size_bytes": 22487040,
            "index_usage": 0,
            "formated_index_name": "i_redundant_2",
            "formated_schema_name": "public",
            "formated_table_name": "t_with_redundant_index",
            "formated_relation_name": "t_with_redundant_index",
            "supports_fk": false
          },
          "public.t_red_fk_1_pkey": {
            "num": 3,
            "index_id": "16451",
            "schema_name": "public",
            "table_name": "t_red_fk_1",
            "table_size_bytes": 36249600,
            "index_name": "t_red_fk_1_pkey",
            "access_method": "btree",
            "reason": "r_red_fk_1_x_idx, r_red_fk_1_id_idx",
            "main_index_def": "CREATE INDEX r_red_fk_1_x_idx ON public.t_red_fk_1 USING btree (id), CREATE INDEX r_red_fk_1_id_idx ON public.t_red_fk_1 USING btree (id)",
            "main_index_size": "21 MB, 21 MB",
            "index_def": "CREATE UNIQUE INDEX t_red_fk_1_pkey ON public.t_red_fk_1 USING btree (id)",
            "index_size_bytes": 22487040,
            "index_usage": 0,
            "formated_index_name": "t_red_fk_1_pkey",
            "formated_schema_name": "public",
            "formated_table_name": "t_red_fk_1",
            "formated_relation_name": "t_red_fk_1",
            "supports_fk": true
          },
          "public.r_red_fk_1_id_idx": {
            "num": 4,
            "index_id": "16453",
            "schema_name": "public",
            "table_name": "t_red_fk_1",
            "table_size_bytes": 36249600,
            "index_name": "r_red_fk_1_id_idx",
            "access_method": "btree",
            "reason": "r_red_fk_1_x_idx",
            "main_index_def": "CREATE INDEX r_red_fk_1_x_idx ON public.t_red_fk_1 USING btree (id)",
            "main_index_size": "21 MB",
            "index_def": "CREATE INDEX r_red_fk_1_id_idx ON public.t_red_fk_1 USING btree (id)",
            "index_size_bytes": 22487040,
            "index_usage": 0,
            "formated_index_name": "r_red_fk_1_id_idx",
            "formated_schema_name": "public",
            "formated_table_name": "t_red_fk_1",
            "formated_relation_name": "t_red_fk_1",
            "supports_fk": true
          },
          "public.r_red_fk_1_x_idx": {
            "num": 5,
            "index_id": "16454",
            "schema_name": "public",
            "table_name": "t_red_fk_1",
            "table_size_bytes": 36249600,
            "index_name": "r_red_fk_1_x_idx",
            "access_method": "btree",
            "reason": "r_red_fk_1_id_idx",
            "main_index_def": "CREATE INDEX r_red_fk_1_id_idx ON public.t_red_fk_1 USING btree (id)",
            "main_index_size": "21 MB",
            "index_def": "CREATE INDEX r_red_fk_1_x_idx ON public.t_red_fk_1 USING btree (id)",
            "index_size_bytes": 22487040,
            "index_usage": 0,
            "formated_index_name": "r_red_fk_1_x_idx",
            "formated_schema_name": "public",
            "formated_table_name": "t_red_fk_1",
            "formated_relation_name": "t_red_fk_1",
            "supports_fk": true
          }
        },
        "redundant_indexes_total": {
          "index_size_bytes_sum": 112435200,
          "table_size_bytes_sum": 181248000
        },
        "do": [
          "DROP INDEX CONCURRENTLY i_bloated; -- 2208 kB, Never Used Indexes, table bloated",
          "DROP INDEX CONCURRENTLY r_red_fk_1_id_idx; -- 21 MB, Never Used Indexes, r_red_fk_1_x_idx, table t_red_fk_1",
          "DROP INDEX CONCURRENTLY r_red_fk_1_x_idx; -- 21 MB, r_red_fk_1_id_idx, Never Used Indexes, table t_red_fk_1",
          "DROP INDEX CONCURRENTLY t_red_fk_1_pkey; -- 21 MB, r_red_fk_1_id_idx, r_red_fk_1_x_idx, table t_red_fk_1",
          "DROP INDEX CONCURRENTLY r_red_fk_2_fk_idx; -- 21 MB, Never Used Indexes, table t_red_fk_2",
          "DROP INDEX CONCURRENTLY i_redundant_1; -- 21 MB, Never Used Indexes, i_redundant_2, table t_with_redundant_index",
          "DROP INDEX CONCURRENTLY i_redundant_2; -- 21 MB, Never Used Indexes, i_redundant_1, table t_with_redundant_index",
          "DROP INDEX CONCURRENTLY i_unused; -- 21 MB, Never Used Indexes, table t_with_unused_index"
        ],
        "undo": [
          "CREATE INDEX CONCURRENTLY i_bloated ON public.bloated USING btree (i); -- table bloated",
          "CREATE INDEX CONCURRENTLY r_red_fk_1_id_idx ON public.t_red_fk_1 USING btree (id); -- table t_red_fk_1",
          "CREATE INDEX CONCURRENTLY r_red_fk_1_x_idx ON public.t_red_fk_1 USING btree (id); -- table t_red_fk_1",
          "CREATE UNIQUE INDEX t_red_fk_1_pkey ON public.t_red_fk_1 USING btree (id); -- table t_red_fk_1",
          "CREATE INDEX CONCURRENTLY r_red_fk_2_fk_idx ON public.t_red_fk_2 USING btree (r_t1_id); -- table t_red_fk_2",
          "CREATE INDEX CONCURRENTLY i_redundant_1 ON public.t_with_redundant_index USING btree (i); -- table t_with_redundant_index",
          "CREATE INDEX CONCURRENTLY i_redundant_2 ON public.t_with_redundant_index USING btree (i); -- table t_with_redundant_index",
          "CREATE INDEX CONCURRENTLY i_unused ON public.t_with_unused_index USING btree (i); -- table t_with_unused_index"
        ],
        "database_stat": {
          "stats_reset": "2019-02-27T23:23:56+00:00",
          "stats_age": "00:03:00",
          "days": 0
        }
      },
      "nodes.json": {
        "hosts": {
          "runner-ed2dce3a-project-9951336-concurrent-0": {
            "internal_alias": "node1",
            "index": "1",
            "role": "master",
            "role_change_detected_at": "never"
          }
        },
        "last_check": {
          "epoch": "1",
          "timestamptz": "2019-02-27 23:26:57.0+0000",
          "dir": "1_2019_02_27T23_26_06_+0000"
        }
      }
    }
  }
}
